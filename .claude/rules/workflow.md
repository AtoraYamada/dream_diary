# 実装ワークフロー

詳細は `docs/specs/sdd_workflow_guidelines.md` を参照。

## 実装フロー（繰り返し）

1. `roadmap.md` で次のタスクと参照先を確認
2. `screens/*.md` で決定事項を確認
3. コードベースを分析（SerenaMCP）
4. 複雑な機能時は feature-dev プラグインを活用
   - `code-explorer`: 既存コードの深い分析
   - `code-architect`: 実装設計の作成
5. 実装計画を動的生成（永続化しない）
6. ユーザー承認。**承認なしに次へ進んではいけません。**
7. TDD実装（Red → Green → Refactor）
8. レビュー
   - バックエンド → `rails-reviewer`
   - フロントエンド → `code-reviewer`
9. **【ユーザー承認】**: レビュー結果を提示
    - **✅ PASS判定**: タスク完了。**コミットはユーザーが手動で実施**。
    - **⚠️ WARNING判定**: ユーザーに確認
    - **❌ REJECT判定**: 必ず修正が必要。ステップ7から再実行。
10. 進捗状況を更新
    - `roadmap.md`: タスクの状態を更新（⬜ → ✅）
    - `screens/*.md`: 実装状況チェックリストを更新（[ ] → [x]）

## 仕様書の原則

| 仕様書に残すもの | 仕様書に残さないもの |
|-----------------|---------------------|
| 技術スタック選定理由 | タイムライン (Day 1, Day 2...) |
| 設計判断 | コマンド例 (rails g model...) |
| データ構造 | コード例 (Dockerfile等) |
| API設計 | 詳細な実装手順 |
| ビジネスルール | |

→ **コードがSource of Truth**。実装詳細はコードを見る。

## 変更管理ルール

| 変更の種類 | 仕様書更新 | コード更新 |
|-----------|-----------|-----------|
| 要件変更（What） | ✅ | ✅ |
| 設計判断変更（Why） | ✅ | ✅ |
| 実装詳細変更（How） | ❌ 不要 | ✅ |
| バグ修正 | ❌ 不要 | ✅ |

## 柔軟な対応

実装フローはガイドラインであり、実装中の質問、部分修正、リファクタリング、追加調査など、柔軟に対応できます。
